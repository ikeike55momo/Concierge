# App Flow Document

## Onboarding and Sign-In/Sign-Up

When a new user arrives they see a clean login page that asks for an email address and a password. There is no public sign-up form in this MVP, so all user accounts are created in advance by an administrator. If a user forgets their password they click the “Forgot Password” link below the login form and enter their email address. The system sends a reset link by email. The user follows this link, chooses a new password, and is then redirected back to the login page to sign in with their updated credentials. After entering valid credentials the user is taken to the main home page. To sign out the user clicks their avatar or profile icon in the top right corner and selects “Logout.” This ends the session and returns them to the login screen. Administrators use the same login page but access it via a hidden staff-only URL. When they sign in successfully they land in the administration area rather than the public home page. Failed login attempts for any user display an on-screen error message asking them to retry.

## Main Dashboard or Home Page

After signing in, general users arrive at the Home Page. A header bar at the top contains the application logo on the left, a search field in the center for entering prefecture or station names, and navigation links on the right labeled Home, My Page, and Logout. Below the header there is a full-width slider showcasing featured halls of the day. Under that slider the page displays a responsive grid of store cards. Each card shows the store name, a color-coded overall score, a short LLM-generated comment, and a predicted win rate. On mobile devices the header links collapse into a hamburger menu and the grid shifts to a single column layout. If an administrator accesses this area they do not see the public navigation. Instead they click a hidden “Admin Panel” link in the header to reach the CSV management interface.

## Detailed Feature Flows and Page Transitions

When a user types a prefecture or station into the search field the store cards update instantly to show matching results. If there are no matches the page displays “No stores found. Try another location.” Tapping or clicking a store card takes the user to the Store Analysis Detail page for that hall. On the detail page the user sees a headline with tomorrow’s win-rate prediction followed by an interactive chart visualizing past performance and event expectations. Below the chart the top three recommended machines are listed by unit number. A suggested entry time and a paragraph of strategy guidance appear next. A 15-character comment generated by the LLM is highlighted in a box alongside a share button that triggers the device’s native sharing options. Scrolling further down reveals an expandable analysis rationale section with extra charts that fade in as they come into view. A “Back to Rankings” link at the bottom returns the user to the Home Page.

Clicking My Page in the header takes the user to a Profile Settings flow. The settings page guides the user through three steps. First the user selects favorite machine types from a searchable dropdown. Next they enter their personal historical win-rate as a percentage. Finally they specify their maximum travel time in minutes. At each step explanatory text appears above the inputs and a “Next” button moves them forward. After completing all steps the user clicks “Save” to apply their preferences. A confirmation message briefly appears and these settings immediately influence the personalized scoring adjustments shown on the Home Page and detail pages.

When an administrator clicks the hidden Admin Panel link they reach the CSV Upload area. There is a drag-and-drop zone where they can drop one or more files or click to open a file picker. The system classifies each file by type and runs schema validation and data integrity checks. If all files pass validation they appear in an upload history list with file name, date, and status. If any errors occur a modal window displays the specific validation issues. The administrator closes the modal, corrects the file, and retries the upload. A toggle switch labeled “Enable nightly batch import” is visible but disabled in this MVP.

## Settings and Account Management

Users manage their personal profile data on the My Page settings flow. They can update their favorite machines, historical win rate, and maximum travel time. There is no billing or subscription management in this version and notification settings are not yet available. After saving changes users click the Home link in the header to return to the main application flow. Administrators manage CSV upload options and the nightly batch toggle in the Admin Panel and click Logout in the header to end their session and return to the login screen.

## Error States and Alternate Paths

If a user enters invalid credentials at login a red error message appears above the form stating, “Email or password is incorrect. Please try again.” When a password reset email fails to send the forgot-password form shows a warning advising the user to contact support. When searching for stores if no results match the query the page shows “No stores found. Try another location.” During CSV upload any schema mismatch or missing column triggers a modal that lists each validation error. The user closes the modal, fixes the file, and reattempts upload. If network connectivity is lost a toast notification appears saying, “Connection lost. Reconnecting…” while the app automatically retries. Should the LLM fail to generate a comment or strategy the UI displays a default placeholder message such as “Check back soon for strategy.” All unexpected errors are logged to Sentry and administrators receive Slack alerts to investigate.

## Conclusion and Overall App Journey

In this MVP an administrator begins by signing in through a hidden link and uploading the required CSV files for stores, machines, daily data, and events. Those files are validated and stored until a nightly batch process computes base and personalized scores. A general user logs in each day or browses recommendations without logging in, filters halls by location, and reviews the color-coded ranking cards. Tapping a card reveals detailed analysis with next-day win-rate forecasts, top machine recommendations, entry-time suggestions, strategy guidance, and a catchy comment. Users tailor the experience by updating their profile preferences in My Page, which immediately affects scoring. Throughout the workflow clear error messages and fallback options ensure users can recover from mistakes or system issues. When finished both administrators and general users logout safely, ending their session and preparing the system for its next cycle of data and insights.
